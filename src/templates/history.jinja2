{% extends "base_static.jinja2" %}

{% block title %}
    {% trans %}Playback history{% endtrans %}
{% endblock title %}

{% block content %}

{{ page_heading(gettext('Playback history')) }}

<h2>{% trans %}Now playing{% endtrans %}</h2>

{% if now_playing %}
    <div class="card-container">
        {% for track in now_playing %}
            <div class="card">
                <div class="card-header">
                    {{ track['username'] }}
                </div>
                <div class="card-body" style="display: flex">
                    <img src="{{ track['image'] }} " height="100" width="100" style="border-radius: var(--border-radius-amount)">
                    <div style="margin-left: .5rem">
                        {% if track['title'] and track['artists'] %}
                            <div style="font-size: 1.3em;">{{ track['title'] }}</div>
                            <div style="font-size: 1.1em;">{{ track['artists']|join(', ') }}</div>
                        {% else %}
                            <div style="font-size: 1.1em;">{{ track['fallback_title'] }}</div>
                        {% endif %}
                        <div class="secondary" style="margin-top: .5rem;">{{ track['playlist'] }}</div>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
{% else %}
    {% trans %}<p>No one is playing music.</p>{% endtrans %}
{% endif %}

<h2>{% trans %}Summary{% endtrans %}</h2>
<p>Playback statistics have been moved to a dedicated 'Statistics' page.</p>

<h2>{% trans %}History{% endtrans %}</h2>

<table class="table">
    <thead>
        <tr>
            <th>
                {% trans %}Time{% endtrans %}
            </th>
            <th>
                {% trans %}User{% endtrans %}
            </th>
            <th>
                {% trans %}Playlist{% endtrans %}
            </th>
            <th>
                {% trans %}Track{% endtrans %}
            </th>
        </tr>
    </thead>
    <tbody>
        {% for track in history %}
            <tr>
                <td class="format-timestamp">{{ track['time'] }}</td>
                <td>{{ track['username'] }}</td>
                <td>{{ track['playlist'] }}</td>
                <td>{{ track['title'] }}</td>
            </tr>
        {% endfor %}
    </tbody>
</table>

<script src="/static/js/format.js"></script>
{% endblock content %}
